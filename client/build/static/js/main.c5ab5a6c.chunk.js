(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),l=a(20),r=a.n(l),c=(a(45),a(17)),o=a(14),i=a(1),m=a(2),d=a(3),u=a(5),p=a(4),f=a(6),h=a(8),E=a.n(h),g=a(36),b=a.n(g),N=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){return n.a.createElement("div",{className:this.props.className},n.a.createElement("a",{href:this.props.href},n.a.createElement("i",{className:this.props.iconClass})," ",this.props.content))}}]),t}(s.Component),v=(a(66),a(67),function(e){function t(){var e,a;Object(m.a)(this,t);for(var s=arguments.length,n=new Array(s),l=0;l<s;l++)n[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={isOpened:!1},a.toggleMenu=function(){a.setState({isOpened:!a.state.isOpened})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"nav__wrapper"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"top__wrapper"},n.a.createElement("div",{className:"top__logo"},n.a.createElement("h3",{className:"top__text"},n.a.createElement("a",{href:"/"},"STORIFY"))),n.a.createElement("div",{className:"trigger",onClick:this.toggleMenu},n.a.createElement("span",{className:"trigger__elem"}),n.a.createElement("span",{className:"trigger__elem"}),n.a.createElement("span",{className:"trigger__elem"})),n.a.createElement("nav",{className:this.state.isOpened?"nav nav-show":"nav"},n.a.createElement("div",{className:"closer",onClick:this.toggleMenu},n.a.createElement("span",{className:"closer__elem"}),n.a.createElement("span",{className:"closer__elem"})),n.a.createElement("div",{className:"nav__menu"},n.a.createElement(N,{className:"nav__item",href:"#special",iconClass:"fas fa-home",content:"Special Offers"}),n.a.createElement(N,{className:"nav__item",href:"#brand-new",iconClass:"fas fa-list-alt",content:"New Products"}),n.a.createElement(N,{className:"nav__item",href:"#all",iconClass:"fas fa-clipboard-check",content:"Product Catalog"}))))))}}]),t}(s.Component)),y=a(37),_=a.n(y),O=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){return n.a.createElement("div",{className:"slider__elem"},n.a.createElement("div",{className:"slider__elem-content"},n.a.createElement("h4",{className:"slider__elem-title"},this.props.good),n.a.createElement("p",{className:"slider__elem-parag"},this.props.descr),this.props.href?n.a.createElement("a",{href:this.props.href,className:"slider__elem-link"},"More"):null),n.a.createElement("div",{className:"slider__elem-bg"}),n.a.createElement("div",{className:"slider__image"},n.a.createElement("img",{className:"slider__image-img",src:this.props.src,alt:this.props.alt})))}}]),t}(s.Component),j=(a(83),a(84),a(85),a(86),function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){return n.a.createElement("div",{className:"slider"},n.a.createElement(_.a,{dots:!0,arrows:!1,autoplay:!0,infinite:!1,pauseOnFocus:!0,speed:1300,autoplaySpeed:4e3,slidesToShow:1,slidesToScroll:1},this.props.slides.map((function(e){return n.a.createElement(O,{key:e._id,good:e.title,descr:e.descr,href:e.href,src:"slides/".concat(e.img.filename),alt:e.alt})}))))}}]),t}(s.Component)),S=(a(87),a(88),function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){return n.a.createElement("div",{className:"newgoods__elem ".concat(this.props.cat)},n.a.createElement("div",{className:"newgoods__block"},n.a.createElement("h4",{className:"newgoods__elem-title"},this.props.good),n.a.createElement("p",{className:"newgoods__elem-parag"},this.props.descr),n.a.createElement("div",{className:"newgoods__elem-bg"}),n.a.createElement("img",{className:"newgoods__elem-img",src:"/uploads/".concat(this.props.img.filename),alt:this.props.alt}),n.a.createElement("a",{href:this.props.href,className:"newgoods__elem-btn"},"Buy it for ".concat(this.props.cost))))}}]),t}(s.Component)),k=(a(89),a(90),function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){return n.a.createElement("div",{className:"goods__elem ".concat(this.props.cat),style:e},n.a.createElement("div",{className:"goods__block"},n.a.createElement("h4",{className:" goods__elem-title"},this.props.good),n.a.createElement("p",{className:"goods__elem-parag"},this.props.descr),n.a.createElement("div",{className:"goods__elem-bg"}),n.a.createElement("img",{className:"goods__elem-img",src:"/uploads/".concat(this.props.img.filename),alt:this.props.alt}),n.a.createElement("span",{className:"goods__elem-price"},this.props.cost),n.a.createElement("a",{href:this.props.href,className:"goods__elem-btn"},"Buy now")))}}]),t}(s.Component)),C=(a(91),a(92),function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){var t=this;return n.a.createElement("div",{onClick:function(){return t.props.sortFunc(t.props.nameId,"cats__elem-active",".cats__elem")},className:"".concat(""!==this.props.defaultClass?this.props.defaultClass:""," cats__elem"),id:this.props.nameId},this.props.content)}}]),t}(s.Component)),w=(a(93),a(94),function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"footer"},n.a.createElement("div",{className:"footer__content"},n.a.createElement("div",{className:"footer__title"},n.a.createElement("a",{href:"/"},"Storify")),n.a.createElement("div",{className:"footer__links"},n.a.createElement("a",{href:"https://vk.com/",className:"footer__link"},n.a.createElement("i",{className:"fab fa-vk"})),n.a.createElement("a",{href:"https://www.facebook.com/",className:"footer__link"},n.a.createElement("i",{className:"fab fa-facebook-f"})),n.a.createElement("a",{href:"https://www.instagram.com/",className:"footer__link"},n.a.createElement("i",{className:"fab fa-instagram"}))),n.a.createElement("div",{className:"footer__nav"},n.a.createElement("ul",{className:"footer__menu"},n.a.createElement("li",{className:"footer__menu-item"},n.a.createElement("a",{href:"#special"},"Special Offers")),n.a.createElement("li",{className:"footer__menu-item"},n.a.createElement("a",{href:"#brand-new"},"New Products")),n.a.createElement("li",{className:"footer__menu-item"},n.a.createElement("a",{href:"#all"},"Product Catalog"))))))}}]),t}(s.Component)),F=(a(95),function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){return n.a.createElement(s.Fragment,null,n.a.createElement("p",{className:"error-msg"},this.props.message))}}]),t}(s.Component)),I=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=function(){E.a.get("/api/goods").then((function(e){var t=[],s={};e.data.forEach((function(e,a){void 0===s[e.cat]&&(s[e.cat]=!0,t.push(e.cat))})),a.setState(Object(i.a)({},a.state,{goods:e.data,cats:t,isLoaded:!0}))})).catch((function(e){a.setState(Object(i.a)({},a.state,{err:e}))})),E.a.get("api/slides").then((function(e){var t=[];e.data.forEach((function(e){t.push(e)})),a.setState(Object(i.a)({},a.state,{slides:t}))})).catch((function(e){a.setState(Object(i.a)({},a.state,{err:e}))}))},a.sortByCat=function(e,t,s){for(var n=document.querySelectorAll(s),l=0;l<n.length;l++)n[l].classList.remove(t);if(document.getElementById(e).classList.add(t),"__all__"===e)a.setState(Object(i.a)({},a.state,{isSorted:!1}));else{var r=a.state.goods.filter((function(t){return t.cat===e}));a.setState(Object(i.a)({},a.state,{isSorted:!0,sortedGoods:r}))}},a.renderNewGoods=function(){for(var e=[],t=a.state.goods,s=0;s<t.length&&s<4;s++)e.push(t[s]);return e},a.checkLoading=function(){return(!1!==a.state.isLoaded||void 0!==a.state.err)&&(!0===a.state.isLoaded&&void 0===a.state.err||void 0)},a.checkError=function(){return void 0!==a.state.err},a.state={goods:[],sortedGoods:[],slides:[],cats:[],err:void 0,isLoaded:!1,isSorted:!1},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){var t=this;return n.a.createElement("div",null,n.a.createElement(v,null),n.a.createElement("section",{className:"section"},n.a.createElement("div",{className:"container"},n.a.createElement("h2",{className:"section__title",id:"special"},"Special Offers"),this.state.slides.length>0?n.a.createElement(j,{slides:this.state.slides}):n.a.createElement("p",null,"No offers yet!"))),n.a.createElement("section",{className:"section goods"},n.a.createElement("div",{className:"container"},n.a.createElement("h2",{className:"section__title",id:"brand-new"},"New products"),n.a.createElement("div",{className:"align-center"},this.checkLoading()?null:n.a.createElement("span",{className:"loading-msg"},"Content is loading...")),n.a.createElement("div",{className:"align-center"},this.checkError()?n.a.createElement(F,{message:"Server error, try to reload the web site"}):null),n.a.createElement("div",{className:"goods__content"},this.checkLoading()?this.renderNewGoods().map((function(e){return n.a.createElement(S,{key:e._id,cat:e.cat,good:e.name,descr:e.descr,img:e.img,alt:"Product on Storify",cost:"".concat(e.cost,"$"),href:e.href})})):null))),n.a.createElement("section",{className:"section"},n.a.createElement("div",{className:"container"},n.a.createElement("h2",{className:"section__title",id:"all"},"Product Catalog"),n.a.createElement("div",{className:"cats__container",id:"cats-container"},n.a.createElement(C,{defaultClass:"cats__elem-active",key:"__all__",nameId:"__all__",content:"all products",sortFunc:this.sortByCat}),this.state.cats.map((function(e){return n.a.createElement(C,{defaultClass:"",nameId:e,content:e,key:b()(),sortFunc:t.sortByCat})}))),n.a.createElement("div",{className:"align-center"},this.checkLoading()?null:n.a.createElement("span",{className:"loading-msg"},"Content is loading...")),n.a.createElement("div",{className:"align-center"},this.checkError()?n.a.createElement(F,{message:"Server error, try to reload the web site"}):null),n.a.createElement("div",{className:"goods__content"},this.checkLoading()?!0===this.state.isSorted?this.state.sortedGoods.map((function(e){return n.a.createElement(k,{key:e._id,cat:e.cat,good:e.name,descr:e.descr,img:e.img,alt:"Product on Storify",cost:"".concat(e.cost,"$"),href:e.href})})):this.state.goods.map((function(e){return n.a.createElement(k,{key:e._id,cat:e.cat,good:e.name,descr:e.descr,img:e.img,alt:"Product on Storify",cost:"".concat(e.cost,"$"),href:e.href})})):null))),n.a.createElement("footer",{className:"section"},n.a.createElement("div",{className:"container"},n.a.createElement(w,null))))}}]),t}(s.Component),x=(a(96),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).sendData=function(){var e=document.getElementById("login").value,t=document.getElementById("password").value;a.setState(Object(i.a)({},a.state,{login:e,password:t})),E.a.post("/secret/adminlogin",{login:e,password:t}).then((function(e){console.log(e),a.setState(Object(i.a)({},a.state,{success:!0}))})).catch((function(e){console.error(e),a.setState(Object(i.a)({},a.state,{err:e.response.data}))}))},a.state={login:null,password:null,err:null,success:!1},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"login-wrapper"},n.a.createElement(c.b,{to:"/"},n.a.createElement("div",{className:"login-logo"},"Storify")),n.a.createElement("div",{className:"login"},n.a.createElement("div",{className:"login-form"},n.a.createElement("div",{className:"login-group"},n.a.createElement("label",{htmlFor:"login"},"Login:"),n.a.createElement("input",{id:"login",name:"login",type:"text",required:!0})),n.a.createElement("div",{className:"login-group"},n.a.createElement("label",{htmlFor:"password"},"Password:"),n.a.createElement("input",{id:"password",name:"password",type:"password",required:!0})),n.a.createElement("input",{onClick:this.sendData,className:"login-submit",type:"submit",required:!0})),n.a.createElement("div",{className:"login-error"},this.state.err?this.state.err:null),this.state.success?n.a.createElement(c.b,{to:"/secret/adminpanel"},n.a.createElement("button",{className:"admin-btn"},"Go to admin panel")):null)))}}]),t}(s.Component)),B=(a(101),function(e){return n.a.createElement("div",{className:"commands-item"},n.a.createElement("span",{className:"commands-descr"},e.descr,":"),n.a.createElement("button",{onClick:e.onClick,className:"commands-trigger"},e.action))}),V=(a(102),function(e){var t,a;return n.a.createElement("div",{className:"item-panel"},n.a.createElement("span",{className:"item-panel-span item-name"},((a=e.item.name).length>30&&(a=a.substr(0,27)+"..."),a)),n.a.createElement("span",{className:"item-panel-span item-date"},(t=e.item.updatedAt,"".concat(new Date(t).toDateString()," ").concat(new Date(t).toLocaleTimeString()))),n.a.createElement("button",{className:"item-btn delete"},"delete"),n.a.createElement("button",{className:"item-btn update"},"update"))}),P=a(11),q=a.n(P),L=(a(104),a(105),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).updateState=function(e,t){var s,n,l,r,c,o,m;return q.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(e.preventDefault(),s=new FormData(document.querySelector(".form-post-type")),n=document.getElementById("cat").value,l=document.getElementById("name").value,r=document.getElementById("descr").value,c=document.getElementById("img").files[0],o=document.getElementById("href").value,m=document.getElementById("cost").value,!(n&&l&&r&&c&&o&&m)){d.next=9;break}return d.next=6,q.a.awrap(a.setState(Object(i.a)({},a.state,{form:s})));case 6:t(a.state.form),d.next=10;break;case 9:a.setState(Object(i.a)({},a.state,{error:"Fields must be filled!"}));case 10:case"end":return d.stop()}}))},a.state={form:null,error:null},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){var t=this;return n.a.createElement("form",{className:"edit-form form-post-type",action:"/",method:"POST",encType:"multipart/form-data"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"cat"},"Write catigory of a product:"),n.a.createElement("input",{className:"form-input",id:"cat",name:"cat",type:"text",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"name"},"Write name of a product:"),n.a.createElement("input",{className:"form-input",id:"name",name:"name",type:"text",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"descr"},"Write description of a product:"),n.a.createElement("textarea",{className:"form-area form-input",id:"descr",name:"descr",type:"text",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"img"},"Upload image of a product:"),n.a.createElement("input",{className:"form-input",id:"img",name:"img",type:"file",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"href"},"Put link for the marketplace of a product:"),n.a.createElement("input",{className:"form-input",id:"href",name:"href",type:"text",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"cost"},"Create cost of a product:"),n.a.createElement("input",{className:"form-input",id:"cost",name:"cost",type:"number",required:!0})),this.state.error?n.a.createElement("div",{className:"form-error"},n.a.createElement("span",{className:"form-error-msg"},this.state.error)):null,n.a.createElement("button",{onClick:function(e){t.updateState(e,t.props.onClick)},className:"submit-btn",type:"submit"},"Post"))}}]),t}(s.Component)),D=(a(106),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).updateState=function(e,t,s,n){var l,r,c,o,m,d;return q.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(e.preventDefault(),l=new FormData(document.querySelector(".form-update-type")),r=document.getElementById("modal-cat").value,c=document.getElementById("modal-name").value,o=document.getElementById("modal-descr").value,m=document.getElementById("modal-href").value,d=document.getElementById("modal-cost").value,!(r&&c&&o&&m&&d)){u.next=8;break}return u.next=6,q.a.awrap(a.setState(Object(i.a)({},a.state,{data:l})));case 6:s(a.state.data,t),n();case 8:case"end":return u.stop()}}))},a.state={data:null},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){var t=this;return n.a.createElement("form",{className:"edit-form form-update-type",action:"/",method:"PUT",encType:"multipart/form-data"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"modal-cat"},"Catigory of a product:"),n.a.createElement("input",{className:"form-input",id:"modal-cat",name:"cat",type:"text",defaultValue:this.props.item.cat})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"modal-name"},"Name of a product:"),n.a.createElement("input",{className:"form-input",id:"modal-name",name:"name",type:"text",defaultValue:this.props.item.name})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"modal-descr"},"Description of a product:"),n.a.createElement("textarea",{className:"form-area form-input",id:"modal-descr",name:"descr",type:"text",defaultValue:this.props.item.descr})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"modal-img"},"Image of a product:"),n.a.createElement("input",{className:"form-input",id:"modal-img",name:"img",type:"file"}),n.a.createElement("p",null,"Currently used image: ",this.props.item.img.originalname)),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"modal-href"},"Link for the marketplace of a product:"),n.a.createElement("input",{className:"form-input",id:"modal-href",name:"href",type:"text",defaultValue:this.props.item.href})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"modal-cost"},"Cost of a product:"),n.a.createElement("input",{className:"form-input",id:"modal-cost",name:"cost",type:"number",defaultValue:this.props.item.cost})),n.a.createElement("div",{className:"form-group btn-group"},n.a.createElement("button",{onClick:function(e){t.updateState(e,t.props.item._id,t.props.updatePost,t.props.closeModal)},className:"modal-btn",type:"submit"},"Change"),n.a.createElement("button",{className:"modal-btn",onClick:this.props.closeModal},"Close modal")))}}]),t}(s.Component)),G=function(e){var t,a;return n.a.createElement("div",{className:"item-panel"},n.a.createElement("span",{className:"item-panel-span item-name"},((a=e.item.title).length>30&&(a=a.substr(0,27)+"..."),a)),n.a.createElement("span",{className:"item-panel-span item-date"},(t=e.item.updatedAt,"".concat(new Date(t).toDateString()," ").concat(new Date(t).toLocaleTimeString()))),n.a.createElement("button",{className:"item-btn delete"},"delete"),n.a.createElement("button",{className:"item-btn update"},"update"))},T=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).updateState=function(e,t){var s,n,l,r,c;return q.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.preventDefault(),s=new FormData(document.querySelector(".form-post-type-slide")),n=document.getElementById("title").value,l=document.getElementById("descr").value,r=document.getElementById("img").files[0],c=document.getElementById("alt").value,!(n&&l&&r&&c)){o.next=14;break}return o.next=6,q.a.awrap(a.setState(Object(i.a)({},a.state,{form:s})));case 6:document.getElementById("title").value="",document.getElementById("descr").value="",document.getElementById("img").value="",document.getElementById("alt").value="",document.getElementById("href").value="",t(a.state.form),o.next=15;break;case 14:a.setState(Object(i.a)({},a.state,{error:"Fields must be filled!"}));case 15:case"end":return o.stop()}}))},a.state={form:null,error:null},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){var t=this;return n.a.createElement("form",{className:"edit-form form-post-type-slide",action:"/",method:"POST",encType:"multipart/form-data"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"title"},"Write title of a slide:"),n.a.createElement("input",{className:"form-input",id:"title",name:"title",type:"text",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"descr"},"Write description of a slide:"),n.a.createElement("input",{className:"form-input",id:"descr",name:"descr",type:"text",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"img"},"Upload image of a product:"),n.a.createElement("input",{className:"form-input",id:"img",name:"img",type:"file",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"alt"},"Create alternative text for a slide:"),n.a.createElement("input",{className:"form-input",id:"alt",name:"alt",type:"text",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"href"},"Put link to the resourse for a slide:"),n.a.createElement("input",{className:"form-input",id:"href",name:"href",type:"text"})),this.state.error?n.a.createElement("div",{className:"form-error"},n.a.createElement("span",{className:"form-error-msg"},this.state.error)):null,n.a.createElement("button",{onClick:function(e){t.updateState(e,t.props.onClick)},className:"submit-btn",type:"submit"},"Post"))}}]),t}(s.Component),M=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).updateState=function(e,t,s,n){var l,r,c,o;return q.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(e.preventDefault(),l=new FormData(document.querySelector(".form-update-type-slide")),r=document.getElementById("title").value,c=document.getElementById("descr").value,o=document.getElementById("alt").value,!(r&&c&&o)){m.next=15;break}return m.next=6,q.a.awrap(a.setState(Object(i.a)({},a.state,{form:l})));case 6:document.getElementById("title").value="",document.getElementById("descr").value="",document.getElementById("img").value="",document.getElementById("alt").value="",document.getElementById("href").value="",s(a.state.form,t),n(),m.next=16;break;case 15:a.setState(Object(i.a)({},a.state,{error:"Fields must be filled!"}));case 16:case"end":return m.stop()}}))},a.state={form:null,error:null},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){var t=this;return n.a.createElement("form",{className:"edit-form form-update-type-slide",action:"/",method:"PUT",encType:"multipart/form-data"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"title"},"Update title of a slide:"),n.a.createElement("input",{className:"form-input",id:"title",name:"title",type:"text",defaultValue:this.props.item.title,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"descr"},"Update description of a slide:"),n.a.createElement("input",{className:"form-input",id:"descr",name:"descr",type:"text",defaultValue:this.props.item.descr,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"img"},"Upload image of a product:"),n.a.createElement("input",{className:"form-input",id:"img",name:"img",type:"file",required:!0}),n.a.createElement("p",null,"Currently used image: ",this.props.item.img.originalname)),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"alt"},"Update alternative text for a slide:"),n.a.createElement("input",{className:"form-input",id:"alt",name:"alt",type:"text",defaultValue:this.props.item.alt,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-label",htmlFor:"href"},"Update link to the resourse for a slide:"),n.a.createElement("input",{className:"form-input",id:"href",name:"href",defaultValue:this.props.item.href,type:"text"})),this.state.error?n.a.createElement("div",{className:"form-error"},n.a.createElement("span",{className:"form-error-msg"},this.state.error)):null,n.a.createElement("button",{onClick:function(e){t.updateState(e,t.props.item._id,t.props.onClick,t.props.closeModal)},className:"submit-btn",type:"submit"},"Update"))}}]),t}(s.Component),U=(a(107),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).specifyClickForGoods=function(e){for(var t=e.target,s=t.parentNode,n=s.parentNode,l=-1,r=0;r<n.children.length;r++)if(n.children[r]===s){l=r;break}var c=a.state.goods[l]._id;if(t.classList.contains("delete")){var o="/api/goods/".concat(c);a.deletePost(o,c,l)}else{if(!t.classList.contains("update"))return;var m=a.state.goods.find((function(e){return e._id.toString()===c.toString()}));a.setState(Object(i.a)({},a.state,{modalItem:m,modalItemIndex:l,modalVisibility:!a.state.modalVisibility}))}},a.getGoods=function(){E.a.get("/api/goods").then((function(e){0===e.data.length?a.setState(Object(i.a)({},a.state,{err:"No products were found!"})):a.setState(Object(i.a)({},a.state,{goods:e.data}))})).catch((function(e){a.setState(Object(i.a)({},a.state,{err:e.message}))}))},a.createPost=function(e){E.a.post("/api/goods",e).then((function(e){a.setState(Object(i.a)({},a.state,{success:e.data,formVisibility:!a.state.formVisibility})),a.getGoods()})).catch((function(e){a.setState(Object(i.a)({},a.state,{err:e.message}))}))},a.updatePost=function(e,t){var s="/api/goods/".concat(t);E.a.put(s,e).then((function(e){a.setState(Object(i.a)({},a.state,{success:e.data})),a.getGoods()})).catch((function(e){a.setState(Object(i.a)({},a.state,{err:e.message}))}))},a.deletePost=function(e,t,s){E.a.delete(e,{data:{id:t}}).then((function(e){var t=[];a.state.goods.forEach((function(e,a){a!==s&&t.push(e)})),a.setState(Object(i.a)({},a.state,{success:e.data,goods:t}))})).catch((function(e){a.setState(Object(i.a)({},a.state,{err:e.message}))}))},a.specifyClickForSlides=function(e){for(var t=e.target,s=t.parentNode,n=s.parentNode,l=-1,r=0;r<n.children.length;r++)if(n.children[r]===s){l=r;break}var c=a.state.slides[l]._id;if(t.classList.contains("delete")){var o="/api/slides/".concat(c);a.deleteSlide(o,c,l)}else{if(!t.classList.contains("update"))return;var m=a.state.slides.find((function(e){return e._id.toString()===c.toString()}));a.setState(Object(i.a)({},a.state,{modalSlide:m,modalSlideVisibility:!a.state.modalSlideVisibility}))}},a.getSlides=function(){E.a.get("/api/slides").then((function(e){0===e.data.length?a.setState(Object(i.a)({},a.state,{err:"No slides were found!"})):a.setState(Object(i.a)({},a.state,{slides:e.data}))})).catch((function(e){a.setState(Object(i.a)({},a.state,{err:e.message}))}))},a.createSlide=function(e){E.a.post("/api/slides",e).then((function(e){a.setState(Object(i.a)({},a.state,{success:e.data,slideFormVisibility:!a.state.slideFormVisibility})),a.getSlides()})).catch((function(e){a.setState(Object(i.a)({},a.state,{err:e.message}))}))},a.deleteSlide=function(e,t,s){E.a.delete(e).then((function(e){var t=[];a.state.slides.forEach((function(e,a){a!==s&&t.push(e)})),a.setState(Object(i.a)({},a.state,{success:e.data,slides:t}))})).catch((function(e){a.setState(Object(i.a)({},a.state,{err:e.message}))}))},a.updateSlide=function(e,t){var s="/api/slides/".concat(t);E.a.put(s,e).then((function(e){a.setState(Object(i.a)({},a.state,{success:e.data})),a.getSlides()})).catch((function(e){a.setState(Object(i.a)({},a.state,{err:e.message}))}))},a.toggleForm=function(){a.setState(Object(i.a)({},a.state,{formVisibility:!a.state.formVisibility}))},a.toggleSlideForm=function(){a.setState(Object(i.a)({},a.state,{slideFormVisibility:!a.state.slideFormVisibility}))},a.closeSlideUpdateForm=function(){a.setState(Object(i.a)({},a.state,{modalSlideVisibility:!a.state.modalSlideVisibility}))},a.closeModal=function(){a.setState(Object(i.a)({},a.state,{modalVisibility:!a.state.modalVisibility}))},a.state={goods:[],slides:[],err:null,success:null,formVisibility:!1,slideFormVisibility:!1,modalVisibility:!1,modalSlideVisibility:!1,modalItem:null,modalSlide:null},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"commands"},n.a.createElement("h2",{className:"commands-title"},"Admin Panel:"),n.a.createElement("div",{className:"msg-block error-block"},this.state.err?this.state.err:null),n.a.createElement("div",{className:"msg-block success-block"},this.state.success?this.state.success:null),n.a.createElement(B,{onClick:this.getGoods,action:"Get",descr:"Get items"}),n.a.createElement(B,{onClick:this.getSlides,action:"Get",descr:"Get slides"}),n.a.createElement(B,{onClick:this.toggleForm,action:this.state.formVisibility?"Close item modal":"Open item modal",descr:"Create and post new item"}),n.a.createElement(B,{onClick:this.toggleSlideForm,action:this.state.slideFormVisibility?"Close slide modal":"Open slide modal",descr:"Create and post new slide"})),n.a.createElement("p",null,"Form for creating new products:"),this.state.formVisibility?n.a.createElement(L,{onClick:this.createPost}):null,n.a.createElement("p",null,"Form for creating new slides:"),this.state.slideFormVisibility?n.a.createElement(T,{onClick:this.createSlide}):null,this.state.modalSlideVisibility?n.a.createElement("div",{className:"modal-container"},n.a.createElement(M,{onClick:this.updateSlide,item:this.state.modalSlide,closeModal:this.closeSlideUpdateForm})):null,this.state.modalVisibility?n.a.createElement("div",{className:"modal-container"},n.a.createElement(D,{updatePost:this.updatePost,item:this.state.modalItem,closeModal:this.closeModal})):null,n.a.createElement("h3",{className:"section-title"},"All products:"),n.a.createElement("div",{onClick:this.specifyClickForGoods,className:"items"},this.state.goods.map((function(e){return n.a.createElement(V,{key:e._id,item:e})}))),n.a.createElement("h3",{className:"section-title"},"All slides:"),n.a.createElement("div",{onClick:this.specifyClickForSlides,className:"slides"},this.state.slides.map((function(e){return n.a.createElement(G,{key:e._id,item:e})}))))}}]),t}(s.Component));var A=function(){return n.a.createElement(c.a,null,n.a.createElement(o.c,null,n.a.createElement(o.a,{path:"/secret/adminpanel",component:U,exact:!0}),n.a.createElement(o.a,{path:"/secret/adminlogin",component:x,exact:!0}),n.a.createElement(o.a,{path:"/",component:I,exact:!0})))};r.a.render(n.a.createElement(A,null),document.getElementById("root"))},40:function(e,t,a){e.exports=a(108)},45:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){}},[[40,1,2]]]);
//# sourceMappingURL=main.c5ab5a6c.chunk.js.map